<main class="main">
  <div class="page-title accent-background">
    <div class="container d-lg-flex justify-content-between align-items-center">
      <h1 class="mb-2 mb-lg-0">{{ job.position }}</h1>
      <nav class="breadcrumbs">
        <ol>
          <li>
            <a routerLink="/">{{ "Homepage" | translate }}</a>
          </li>
          <li>
            <a routerLink="/job">{{ "Jobs" | translate }}</a>
          </li>
          <li class="current">{{ job?.position }}</li>
        </ol>
      </nav>
    </div>
  </div>
  <div class="container">
    <div class="row my-5">
      <div class="col-md-9 mb-3">
        <p-panel [showHeader]="false">
          <div class="p-3 mt-3">
            <div class="d-flex mb-5">
              <img
                width="100"
                height="100"
                src="{{ environment.host }}{{ job?.tenantImageUrl }}"
                alt=""
              />
              <div class="ms-3">
                <h5 class="mt-3">{{ job.tenantName }}</h5>
                <div class="d-flex mt-3">
                  <a
                    class="text-dark me-3"
                    target="_blank"
                    [href]="job?.tenantWebSiteUrl"
                    ><i class="pi pi-globe"></i> Web Site
                  </a>
                  <a
                    class="text-dark me-3"
                    target="_blank"
                    [href]="job?.tenantLinkedinUrl"
                    ><i class="pi pi-linkedin"></i> Linkedin</a
                  >
                  <a
                    class="text-dark me-3"
                    target="_blank"
                    [href]="job?.tenantTwitterUrl"
                    ><i class="pi pi-twitter"></i> X
                  </a>
                </div>
              </div>
            </div>
            <div [innerHTML]="job?.description"></div>
          </div>
        </p-panel>
      </div>
      <div class="col-md-3 mb-3">
        <p-panel [showHeader]="false">
          <div class="p-3 mt-3">
            <div class="border-bottom pb-2 mb-3">
              <div class="d-flex">
                <i class="pi pi-calendar text-success"></i>
                <div class="ms-3">
                  <h6>{{ "LastUpdateDate" | translate }}</h6>
                  <div class="font-size-14">
                    {{ job?.lastUpdatedDate | date : "dd.MM.yyyy" }}
                  </div>
                </div>
              </div>
            </div>
            <div class="border-bottom pb-2 mb-3">
              <div class="d-flex">
                <i class="pi pi-user text-success"></i>
                <div class="ms-3">
                  <h6>{{ "Position" | translate }}</h6>
                  <div class="font-size-14">{{ job?.position }}</div>
                </div>
              </div>
            </div>
            <div class="border-bottom pb-2 mb-3">
              <div class="d-flex">
                <i class="pi pi-clock text-success"></i>
                <div class="ms-3">
                  <h6>{{ "WorkType" | translate }}</h6>
                  <div class="font-size-14">
                    {{ job?.workTypeName | translate }}
                  </div>
                </div>
              </div>
            </div>
            <div class="border-bottom pb-2 mb-3">
              <div class="d-flex">
                <i class="pi pi-map text-success"></i>
                <div class="ms-3">
                  <h6>{{ "Location" | translate }}</h6>
                  <div class="font-size-14">{{ job?.jobLocationName }}</div>
                </div>
              </div>
            </div>
            <div class="border-bottom pb-2 mb-3">
              <div class="d-flex">
                <i class="pi pi-globe text-success"></i>
                <div class="ms-3">
                  <h6>Web Site</h6>
                  <div class="font-size-14">
                    <a [href]="job?.tenantWebSiteUrl" target="_blank">
                      {{ job?.tenantWebSiteUrl }}</a
                    >
                  </div>
                </div>
              </div>
            </div>

            <p-button
              class="w-100"
              styleClass="w-100"
              [disabled]="job.isApplyUser"
              label="{{
                job.isApplyUser
                  ? ('Applied' | translate)
                  : ('Apply' | translate)
              }}"
              icon="pi pi-check-circle"
              (onClick)="apply()"
            ></p-button>
          </div>
        </p-panel>
      </div>
    </div>
  </div>
</main>

<p-dialog
  [(visible)]="showApplyModal"
  header="Apply Job"
  [modal]="true"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [style]="{ width: '50vw' }"
  [draggable]="false"
  [resizable]="false"
>
  <div class="mb-3">
    <div *ngFor="let item of cvList">
      <div class="card mb-3">
        <div class="card-body py-2 px-4">
          <div class="d-flex">
            <div class="flex-grow-1">
              <div class="text-primary">
                <i class="pi pi-file-pdf"></i> {{ item.fileName }}
              </div>
              <div class="font-size-14">
                <i class="pi pi-calendar"></i>
                {{ item.insertedDate | date : "dd.MM.yyyy HH:mm" }}
              </div>
            </div>
            <p-radiobutton
              class="float-end align-content-center"
              [value]="item.id"
              [(ngModel)]="selectedFileId"
            ></p-radiobutton>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-4 w-100">
      <p-fileupload
        styleClass="justify-content-start"
        mode="basic"
        chooseLabel="Add New CV"
        chooseIcon="pi pi-upload"
        accept="application/pdf"
        maxFileSize="1000000"
        (onSelect)="onSelect($event)"
      />
    </div>
    <div class="w-100">
      <p-button
        icon="pi pi-save"
        label="Save"
        styleClass="float-end"
        (click)="save()"
      ></p-button>
    </div>
  </div>
</p-dialog>
