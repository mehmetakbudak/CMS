<p-confirm-dialog />
<p-toast />
<main class="main">
  <div class="row">
    <div class="col-12">
      <p-panel [showHeader]="false">
        <div class="p-md-3">
          <div class="d-flex align-content-between">
            <h2 class="my-3 flex-grow-1">My CV</h2>
            <p-button
              [rounded]="true"
              [size]="'small'"
              [severity]="'warn'"
              class="float-end align-content-center"
              icon="pi pi-plus"
              (click)="add()"
            ></p-button>
          </div>
          <p-table
            [value]="list"
            [paginator]="true"
            [rows]="5"
            [showGridlines]="true"
            [stripedRows]="true"
            [responsive]="true"
            [rowsPerPageOptions]="[5, 10, 20]"
            [loading]="loading"
          >
            <ng-template #header>
              <tr>
                <th class="table-icon-col" pFrozenColumn></th>
                <th>File Name</th>
                <th>Default</th>
                <th>Inserted Date</th>
                <th>Updated Date</th>
              </tr>
            </ng-template>
            <ng-template #body let-item>
              <tr>
                <td pFrozenColumn class="table-icon-col">
                  <p-menu
                    #menu
                    [model]="gridMenuItems"
                    [popup]="true"
                    appendTo="body"
                  ></p-menu>
                  <p-button
                    (click)="menuToggle(menu, $event, item)"
                    icon="pi pi-cog"
                    [link]="true"
                  />
                </td>
                <td>{{ item.fileName }}</td>
                <td>
                  <p-checkbox
                    [disabled]="true"
                    [(ngModel)]="item.isDefault"
                    [binary]="true"
                    inputId="binary"
                  />
                </td>
                <td>{{ item.insertedDate | date : "dd.MM.yyyy HH:mm" }}</td>
                <td>{{ item.updatedDate | date : "dd.MM.yyyy HH:mm" }}</td>
              </tr>
            </ng-template>
            <ng-template #emptymessage>
              <tr>
                <td colspan="4">No data.</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </p-panel>
    </div>
  </div>
</main>

<p-dialog
  [(visible)]="showAddModal"
  header="Add New CV"
  [modal]="true"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [style]="{ width: '30vw' }"
  [draggable]="false"
  [resizable]="false"
  position="top"
  [draggable]="false"
  [resizable]="false"
>
  <div>
    <div class="w-100 mb-4">
      <p-fileupload
        styleClass="justify-content-start"
        mode="basic"
        chooseLabel="Add New CV"
        chooseIcon="pi pi-upload"
        accept="application/pdf"
        maxFileSize="1000000"
        (onSelect)="onSelect($event)"
      />
    </div>
    <div class="w-100 mb-4">
      <label class="w-100"> Default </label>
      <p-toggleSwitch [(ngModel)]="isDefault" inputId="default" />
    </div>
    <div class="w-100">
      <p-button
        icon="pi pi-save"
        label="Save"
        styleClass="float-end"
        (click)="save()"
      ></p-button>
    </div>
  </div>
</p-dialog>
