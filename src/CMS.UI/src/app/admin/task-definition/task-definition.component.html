<p-panel>
  <ng-template #header>
    <h3>Task Categories</h3>
  </ng-template>
  <ng-template pTemplate="icons">
    <p-button
      class="p-panel-header-icon p-link"
      (click)="reset()"
      icon="pi pi-delete-left"
      [link]="true"
    />
    <p-button
      class="p-panel-header-icon p-link"
      (click)="search()"
      icon="pi pi-search"
      [link]="true"
    />
    <p-button
      class="p-panel-header-icon p-link"
      icon="pi pi-ellipsis-v"
      (click)="menu.toggle($event)"
      [link]="true"
    />
    <p-menu #menu [model]="menuItems" [popup]="true" appendTo="body" />
  </ng-template>
  <div class="mt-3">
    <div class="row">
      <div class="col-md-4">
        <div class="mb-3">
          <input class="w-100" type="text" pInputText placeholder="Name" />
        </div>
      </div>
    </div>
  </div>
  <p-table
    [value]="taskCategories"
    [stripedRows]="true"
    [showGridlines]="true"
    [paginator]="true"
    [rows]="5"
    [loading]="loading"
    [scrollable]="true"
    [rowsPerPageOptions]="[5, 10, 25, 50]"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [showCurrentPageReport]="true"
    rowExpandMode="single"
    dataKey="id"
    (onRowExpand)="onRowExpand($event)"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="table-icon-col"></th>
        <th class="table-icon-col" pFrozenColumn></th>
        <th>Name</th>
        <th>Active</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item let-expanded="expanded">
      <tr>
        <td class="table-icon-col">
          <p-button
            [link]="true"
            [pRowToggler]="item"
            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
          />
        </td>
        <td pFrozenColumn class="table-icon-col">
          <p-menu
            #menu
            [model]="gridMenuItems"
            [popup]="true"
            appendTo="body"
          ></p-menu>
          <p-button
            (click)="menuToggle(menu, $event, item)"
            icon="pi pi-cog"
            [link]="true"
          />
        </td>
        <td>{{ item.name }}</td>
        <td>
          <p-checkbox
            [disabled]="true"
            [(ngModel)]="item.isActive"
            [binary]="true"
            inputId="binary"
          />
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="rowexpansion" let-item>
      <tr>
        <td colspan="4">
          <div class="p-2">
            <h3 class="mb-2">Task Statuses</h3>
            <p-table [value]="taskStatuses">
              <ng-template #header>
                <tr>
                  <th>Name</th>
                  <th>Display Order</th>
                  <th>Completed</th>
                  <th>Active</th>
                </tr>
              </ng-template>
              <ng-template #body let-status>
                <tr>
                  <td>{{ status.name }}</td>
                  <td>{{ status.displayOrder }}</td>
                  <td>
                    <p-checkbox
                      [disabled]="true"
                      [(ngModel)]="status.isCompleted"
                      [binary]="true"
                      inputId="binary"
                    />
                  </td>
                  <td>
                    <p-checkbox
                      [disabled]="true"
                      [(ngModel)]="status.isActive"
                      [binary]="true"
                      inputId="binary"
                    />
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-panel>
